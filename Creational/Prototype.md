## ğŸ“Œ ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ 5: **Prototype (ĞŸÑ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿)**

### ğŸ§  ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:

ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹, **Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ñ‹Ğ²Ğ°ÑÑÑŒ Ğº Ğ¸Ñ… ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¼ ĞºĞ»Ğ°ÑÑĞ°Ğ¼**. ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ Ğ¿Ğ¾Ğ»ĞµĞ·ĞµĞ½, ĞºĞ¾Ğ³Ğ´Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ° Â«Ñ Ğ½ÑƒĞ»ÑÂ» Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼ Ğ¸Ğ»Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾.

---

### âœ… ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:

* ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ ĞºĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ Ğ±ĞµĞ· Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ Ğ¸Ñ… ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ñ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ².
* Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‚ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ñ‚ÑĞ¶Ñ‘Ğ»Ñ‹Ñ… Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ².
* Ğ£Ğ´Ğ¾Ğ±ĞµĞ½ Ğ´Ğ»Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (ĞºĞ¾Ğ¿Ğ¸Ñ, undo, snapshot).
* Ğ›ĞµĞ³ĞºĞ¾ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµÑ‚ÑÑ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼Ğ¸ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ².

---

### âŒ ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸:

* Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ ĞºĞ»Ğ°ÑÑĞµ.
* ĞœĞ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾Ğµ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ.
* ĞŸÑ€Ğ¸ Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ»ĞµĞ³ĞºĞ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞ¸Ñ‚ÑŒ Ğ¸Ğ½Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°.

---

### ğŸ—ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ»Ğ°ÑÑĞ¾Ğ²

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     Prototype      â”‚â—„â”€â”€â”€â”€â”€â”
        â”‚ +clone()           â”‚      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                 â”‚                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
        â”‚ ConcretePrototypeA â”‚      â”‚
        â”‚ +clone()          â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ’» ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ´Ğ° Ğ½Ğ° C++

```cpp
#include <iostream>
#include <memory>
#include <string>

// ĞŸÑ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿
class Prototype {
public:
    virtual std::unique_ptr<Prototype> clone() const = 0;
    virtual void use() const = 0;
    virtual ~Prototype() = default;
};

// ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿ A
class ConcretePrototypeA : public Prototype {
private:
    std::string data;

public:
    ConcretePrototypeA(const std::string& d) : data(d) {}
    
    std::unique_ptr<Prototype> clone() const override {
        return std::make_unique<ConcretePrototypeA>(*this);
    }

    void use() const override {
        std::cout << "Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ConcretePrototypeA Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸: " << data << "\n";
    }
};

// ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿ B
class ConcretePrototypeB : public Prototype {
private:
    int value;

public:
    ConcretePrototypeB(int v) : value(v) {}
    
    std::unique_ptr<Prototype> clone() const override {
        return std::make_unique<ConcretePrototypeB>(*this);
    }

    void use() const override {
        std::cout << "Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ConcretePrototypeB Ñ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ĞµĞ¼: " << value << "\n";
    }
};

// ĞšĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¸Ğ¹ ĞºĞ¾Ğ´
void clientCode(const Prototype& prototype) {
    auto clone = prototype.clone();
    clone->use();
}

int main() {
    ConcretePrototypeA originalA("ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ A");
    ConcretePrototypeB originalB(42);

    std::cout << "ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞµĞ¼ A:\n";
    clientCode(originalA);

    std::cout << "\nĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞµĞ¼ B:\n";
    clientCode(originalB);
}
```

---

### ğŸ–¼ï¸ Ğ˜Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°:

```
OriginalA          OriginalB
   â”‚                  â”‚
   â–¼                  â–¼
clone()             clone()
   â”‚                  â”‚
   â–¼                  â–¼
CopyA              CopyB
   â”‚                  â”‚
 use()              use()
```

---

### â“ Ğ£Ğ³Ğ»ÑƒĞ±Ğ»ÑÑÑ‰Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹:

1. Ğ§ĞµĞ¼ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚Ğ½Ğ¾Ğµ ĞºĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾Ğ³Ğ¾ (shallow vs deep copy)?
2. ĞšĞ¾Ğ³Ğ´Ğ° Ğ»ÑƒÑ‡ÑˆĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Prototype Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Factory Method?
3. ĞšĞ°ĞºĞ¸Ğµ ĞºĞ»Ğ°ÑÑÑ‹ C++ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‚ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ?
4. Ğ§Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ¹Ñ‚Ğ¸ Ğ½Ğµ Ñ‚Ğ°Ğº Ğ¿Ñ€Ğ¸ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ² Ñ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸?
5. ĞšĞ°Ğº Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿, ĞµÑĞ»Ğ¸ Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ Ñ€ĞµÑÑƒÑ€ÑĞ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ñ„Ğ°Ğ¹Ğ»)?
6. ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Prototype Ñ Builder Ğ¸Ğ»Ğ¸ Decorator?

## ğŸ§ª ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ 5: **Prototype (ĞŸÑ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿)**

### ğŸ” Ğ£Ğ³Ğ»ÑƒĞ±Ğ»ÑÑÑ‰Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹

1. **Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ° shallow copy vs deep copy?**

   * *Shallow copy* ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸, *deep copy* ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ, Ğ½Ğ°Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸ĞµÑÑ Ğ¿Ğ¾ ÑÑ‚Ğ¸Ğ¼ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑĞ¼. ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½ĞµĞµ, Ğ½Ğ¾ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚Ğ½ĞµĞµ.

2. **ĞšĞ°Ğº Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾Ğµ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ?**

   * Ğ’Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ¸Ğ»Ğ¸ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ ÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸/Ğ´ĞµÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸.

3. **Ğ§Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ¹Ñ‚Ğ¸ Ğ½Ğµ Ñ‚Ğ°Ğº Ñ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸?**

   * ĞŸĞ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚Ğ½Ğ¾Ğµ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ²ĞµÑÑ‚Ğ¸ Ğº Ğ´Ğ²Ğ¾Ğ¹Ğ½Ğ¾Ğ¼Ñƒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ (double free).

4. **ĞšĞ°Ğº Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸?**

   * ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ´ĞµÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ñ€Ñ‹ Ğ¸Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ RAII-Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ (`fstream`, `unique_ptr`, Ğ¸ Ñ‚.Ğ´.).

---

### ğŸ’» Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ğ½Ğ° C++ Ñ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¼ ĞºĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼

```cpp
#include <iostream>
#include <string>
#include <memory>

class Document {
private:
    std::string* content;

public:
    Document(const std::string& text) {
        content = new std::string(text);
    }

    // Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ¾Ğµ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
    Document(const Document& other) {
        content = new std::string(*other.content);
    }

    ~Document() {
        delete content;
    }

    std::unique_ptr<Document> clone() const {
        return std::make_unique<Document>(*this);
    }

    void show() const {
        std::cout << "Document content: " << *content << "\n";
    }
};

int main() {
    Document original("Hello, Prototype!");
    auto copy = original.clone();

    original.show();
    copy->show();
}
```

---

### ğŸ–¼ï¸ Ğ¡Ñ…ĞµĞ¼Ğ° Prototype (Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ°Ñ ĞºĞ¾Ğ¿Ğ¸Ñ)

```
Original Document (content* -> "Hello")
         |
        clone()
         |
     Deep Copy
         â–¼
Cloned Document (new content* -> "Hello")
```
