## üìå –ü–∞—Ç—Ç–µ—Ä–Ω 4: **Builder (–°—Ç—Ä–æ–∏—Ç–µ–ª—å)**

### üß† –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:

–û—Ç–¥–µ–ª—è–µ—Ç **–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞** –æ—Ç –µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, —Ç–∞–∫ —á—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–∂–µ—Ç –ø–æ—Ä–æ–∂–¥–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç **–º–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö, –∏ –∏—Ö —Å–ª–æ–∂–Ω–æ —É–¥–æ–±–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ.

---

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

* –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—à–∞–≥–æ–≤–æ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã.
* –£–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.
* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —á–∏—Å—Ç—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∏ –≥–∏–±–∫–∏–π –∫–æ–¥.
* –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å **–∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏**.

---

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

* –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–µ–Ω –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
* –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤.
* –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–ø—É—Å–∫–∞—é—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏.

---

### üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–æ–≤

```
Client ‚Üí Director ‚Üí Builder
                     ‚îú‚îÄ ConcreteBuilderA
                     ‚îú‚îÄ ConcreteBuilderB
                             ‚îÇ
                             ‚ñº
                        Product
```

---

### üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ C++

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Å—Ç—Ä–æ–∏–º **–¥–æ–º**, –∏ —É –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–∞ –µ—Å—Ç—å —Å—Ç–µ–Ω—ã, –∫—Ä—ã—à–∞ –∏ –æ–∫–Ω–∞. –ú—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ–≥–æ "—Å—Ç—Ä–æ–∏—Ç–µ–ª—è" –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–º–æ–≤: –¥–µ—Ä–µ–≤—è–Ω–Ω—ã—Ö –∏ –∫–∞–º–µ–Ω–Ω—ã—Ö.

```cpp
#include <iostream>
#include <string>
#include <memory>

// –ü—Ä–æ–¥—É–∫—Ç
class House {
public:
    void setWalls(const std::string& w) { walls = w; }
    void setRoof(const std::string& r) { roof = r; }
    void setWindows(const std::string& win) { windows = win; }

    void show() const {
        std::cout << "–î–æ–º —Å: " << walls << ", " << roof << ", " << windows << "\n";
    }

private:
    std::string walls;
    std::string roof;
    std::string windows;
};

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–æ–∏—Ç–µ–ª—è
class HouseBuilder {
public:
    virtual void buildWalls() = 0;
    virtual void buildRoof() = 0;
    virtual void buildWindows() = 0;
    virtual std::unique_ptr<House> getHouse() = 0;
    virtual ~HouseBuilder() = default;
};

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å: –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–π –¥–æ–º
class WoodenHouseBuilder : public HouseBuilder {
private:
    std::unique_ptr<House> house = std::make_unique<House>();

public:
    void buildWalls() override { house->setWalls("–¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ —Å—Ç–µ–Ω—ã"); }
    void buildRoof() override { house->setRoof("—á–µ—Ä–µ–ø–∏—á–Ω–∞—è –∫—Ä—ã—à–∞"); }
    void buildWindows() override { house->setWindows("—Å—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –æ–∫–Ω–∞"); }
    std::unique_ptr<House> getHouse() override { return std::move(house); }
};

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å: –∫–∞–º–µ–Ω–Ω—ã–π –¥–æ–º
class StoneHouseBuilder : public HouseBuilder {
private:
    std::unique_ptr<House> house = std::make_unique<House>();

public:
    void buildWalls() override { house->setWalls("–∫–∞–º–µ–Ω–Ω—ã–µ —Å—Ç–µ–Ω—ã"); }
    void buildRoof() override { house->setRoof("–±–µ—Ç–æ–Ω–Ω–∞—è –∫—Ä—ã—à–∞"); }
    void buildWindows() override { house->setWindows("–∞—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–∫–Ω–∞"); }
    std::unique_ptr<House> getHouse() override { return std::move(house); }
};

// –î–∏—Ä–µ–∫—Ç–æ—Ä
class Director {
private:
    HouseBuilder* builder;

public:
    void setBuilder(HouseBuilder* b) { builder = b; }

    void construct() {
        builder->buildWalls();
        builder->buildRoof();
        builder->buildWindows();
    }
};

// –ö–ª–∏–µ–Ω—Ç
int main() {
    Director director;

    WoodenHouseBuilder woodenBuilder;
    director.setBuilder(&woodenBuilder);
    director.construct();
    std::unique_ptr<House> woodenHouse = woodenBuilder.getHouse();
    woodenHouse->show();

    StoneHouseBuilder stoneBuilder;
    director.setBuilder(&stoneBuilder);
    director.construct();
    std::unique_ptr<House> stoneHouse = stoneBuilder.getHouse();
    stoneHouse->show();
}
```

---

### üñºÔ∏è –ò–ª–ª—é—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Å—Ö–µ–º–∞:

```
main()
  ‚îÇ
  ‚ñº
Director ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ                    ‚îÇ
  ‚ñº                    ‚ñº
WoodenBuilder       StoneBuilder
  ‚îÇ                    ‚îÇ
  ‚ñº                    ‚ñº
–î–æ–º A                –î–æ–º B
```

---

### ‚ùì –£–≥–ª—É–±–ª—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:

1. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –∫–ª–∞—Å—Å `Director`, –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –±–∏–ª–¥–µ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é?
2. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Builder –±–µ–∑ `Director` (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)?
3. –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Builder –∏ Abstract Factory?
4. –ü–æ—á–µ–º—É Builder —Ö–æ—Ä–æ—à–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º Composite –∏–ª–∏ Decorator?
5. –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `builder->getHouse()`?
6. –ö–∞–∫ –±—ã –≤—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ Builder –¥–ª—è —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, `JSON` –∏–ª–∏ `SQL-–∑–∞–ø—Ä–æ—Å`?

## üß± –ü–∞—Ç—Ç–µ—Ä–Ω 4: **Builder (–°—Ç—Ä–æ–∏—Ç–µ–ª—å)**

### üîç –£–≥–ª—É–±–ª—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ)

1. **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω `Director`, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å `Builder`?**

   * `Director` –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è. –≠—Ç–æ –≤–∞–∂–Ω–æ, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫ —Ä–∞–∑–Ω—ã–º –±–∏–ª–¥–µ—Ä–∞–º. –ù–æ –µ–≥–æ –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ fluent-—Å—Ç–∏–ª—è.

2. **Fluent Builder: –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å?**

   * Fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–º–æ–≥–æ —Å–µ–±—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞, –ø–æ–∑–≤–æ–ª—è—è –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Ü–µ–ø–æ—á–∫–æ–π.

3. **Builder vs Abstract Factory?**

   * **Builder** —Å—Ç—Ä–æ–∏—Ç **–æ–¥–∏–Ω —Å–ª–æ–∂–Ω—ã–π –æ–±—ä–µ–∫—Ç –ø–æ—à–∞–≥–æ–≤–æ**, –∞ **Abstract Factory** —Å–æ–∑–¥–∞–µ—Ç **—Ä–∞–∑–Ω—ã–µ, –Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –æ–±—ä–µ–∫—Ç—ã** —Å—Ä–∞–∑—É.

---

### üíª –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π Fluent Builder –Ω–∞ C++

```cpp
#include <iostream>
#include <string>
#include <memory>

class Car {
public:
    std::string engine;
    std::string transmission;
    std::string color;

    void print() const {
        std::cout << "Car with engine: " << engine
                  << ", transmission: " << transmission
                  << ", color: " << color << "\n";
    }
};

class CarBuilder {
private:
    std::unique_ptr<Car> car = std::make_unique<Car>();

public:
    CarBuilder& setEngine(const std::string& engineType) {
        car->engine = engineType;
        return *this;
    }

    CarBuilder& setTransmission(const std::string& transmissionType) {
        car->transmission = transmissionType;
        return *this;
    }

    CarBuilder& setColor(const std::string& color) {
        car->color = color;
        return *this;
    }

    std::unique_ptr<Car> build() {
        return std::move(car);
    }
};

int main() {
    CarBuilder builder;
    auto sportsCar = builder.setEngine("V8")
                            .setTransmission("Automatic")
                            .setColor("Red")
                            .build();
    sportsCar->print();
}
```

---

### üñºÔ∏è –°—Ö–µ–º–∞ Builder —Å fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

```
    [CarBuilder]
        |
    +--------------------+
    | setEngine()        |
    | setTransmission()  |
    | setColor()         |
    | build()            |
    +--------------------+
        |
      Car (V8, Automatic, Red)
```
