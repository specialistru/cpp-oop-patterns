## 📌 Паттерн 1: **Singleton (Одиночка)**

### 🧠 Назначение:

Гарантирует, что у класса есть только один экземпляр, и предоставляет глобальную точку доступа к нему.

---

### ✅ Преимущества:

* Контроль над единственным экземпляром класса.
* Экономия ресурсов при повторном использовании.
* Удобно при управлении состоянием приложения (например, конфигурации, логгеры).

---

### ❌ Недостатки:

* Нарушает принцип единственной ответственности (SRP).
* Затрудняет написание unit-тестов (из-за глобального состояния).
* Может быть проблемой в многопоточной среде без синхронизации.
* Трудно расширяем (невозможно наследовать разные реализации одиночки).

---

### 🏗️ Структура классов

```
┌─────────────┐
│   Client    │
└────┬────────┘
     │
     ▼
┌──────────────┐
│  Singleton   │
│──────────────│
│ - instance   │  (статическое поле)
│ + getInstance│  (статический метод)
│ + operation  │
└──────────────┘
```

---

### 💻 Пример на C++

```cpp
#include <iostream>
#include <mutex>

class Singleton {
private:
    static Singleton* instance;
    static std::mutex mutex;

    // Приватный конструктор
    Singleton() {
        std::cout << "Singleton создан\n";
    }

public:
    // Запрет копирования
    Singleton(const Singleton&) = delete;
    Singleton& operator=(const Singleton&) = delete;

    static Singleton* getInstance() {
        std::lock_guard<std::mutex> lock(mutex);
        if (instance == nullptr) {
            instance = new Singleton();
        }
        return instance;
    }

    void operation() {
        std::cout << "Операция Singleton\n";
    }
};

// Инициализация статических полей
Singleton* Singleton::instance = nullptr;
std::mutex Singleton::mutex;

int main() {
    Singleton::getInstance()->operation();
    Singleton::getInstance()->operation();
}
```

---

### 🖼️ Иллюстративная схема:

```
┌────────────────────────┐
│       main()           │
└─────────┬──────────────┘
          │
          ▼
  Singleton::getInstance()
          │
          ▼
┌────────────────────────┐
│     Singleton (1x)     │
│ operation()            │
└────────────────────────┘
```

---

### ❓ Углубляющие вопросы:

1. Зачем делать конструктор класса Singleton приватным?
2. Что произойдет, если использовать Singleton без блокировки в многопоточной среде?
3. Почему Singleton считается антипаттерном в больших проектах?
4. Как реализовать ленивую инициализацию без утечек памяти?
5. Какие способы сделать Singleton потокобезопасным в C++11 и выше?
6. Как бы вы реализовали Singleton для использования в юнит-тестах?
