## ๐ ะะฐััะตัะฝ 1: **Singleton (ะะดะธะฝะพัะบะฐ)**

### ๐ง ะะฐะทะฝะฐัะตะฝะธะต:

ะะฐัะฐะฝัะธััะตั, ััะพ ั ะบะปะฐััะฐ ะตััั ัะพะปัะบะพ ะพะดะธะฝ ัะบะทะตะผะฟะปัั, ะธ ะฟัะตะดะพััะฐะฒะปัะตั ะณะปะพะฑะฐะปัะฝัั ัะพัะบั ะดะพัััะฟะฐ ะบ ะฝะตะผั.

---

### โ ะัะตะธะผััะตััะฒะฐ:

* ะะพะฝััะพะปั ะฝะฐะด ะตะดะธะฝััะฒะตะฝะฝัะผ ัะบะทะตะผะฟะปััะพะผ ะบะปะฐััะฐ.
* ะญะบะพะฝะพะผะธั ัะตััััะพะฒ ะฟัะธ ะฟะพะฒัะพัะฝะพะผ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ.
* ะฃะดะพะฑะฝะพ ะฟัะธ ัะฟัะฐะฒะปะตะฝะธะธ ัะพััะพัะฝะธะตะผ ะฟัะธะปะพะถะตะฝะธั (ะฝะฐะฟัะธะผะตั, ะบะพะฝัะธะณััะฐัะธะธ, ะปะพะณะณะตัั).

---

### โ ะะตะดะพััะฐัะบะธ:

* ะะฐัััะฐะตั ะฟัะธะฝัะธะฟ ะตะดะธะฝััะฒะตะฝะฝะพะน ะพัะฒะตัััะฒะตะฝะฝะพััะธ (SRP).
* ะะฐัััะดะฝัะตั ะฝะฐะฟะธัะฐะฝะธะต unit-ัะตััะพะฒ (ะธะท-ะทะฐ ะณะปะพะฑะฐะปัะฝะพะณะพ ัะพััะพัะฝะธั).
* ะะพะถะตั ะฑััั ะฟัะพะฑะปะตะผะพะน ะฒ ะผะฝะพะณะพะฟะพัะพัะฝะพะน ััะตะดะต ะฑะตะท ัะธะฝััะพะฝะธะทะฐัะธะธ.
* ะขััะดะฝะพ ัะฐััะธััะตะผ (ะฝะตะฒะพะทะผะพะถะฝะพ ะฝะฐัะปะตะดะพะฒะฐัั ัะฐะทะฝัะต ัะตะฐะปะธะทะฐัะธะธ ะพะดะธะฝะพัะบะธ).

---

### ๐๏ธ ะกัััะบัััะฐ ะบะปะฐััะพะฒ

```
โโโโโโโโโโโโโโโ
โ   Client    โ
โโโโโโฌโโโโโโโโโ
     โ
     โผ
โโโโโโโโโโโโโโโโ
โ  Singleton   โ
โโโโโโโโโโโโโโโโ
โ - instance   โ  (ััะฐัะธัะตัะบะพะต ะฟะพะปะต)
โ + getInstanceโ  (ััะฐัะธัะตัะบะธะน ะผะตัะพะด)
โ + operation  โ
โโโโโโโโโโโโโโโโ
```

---

### ๐ป ะัะธะผะตั ะฝะฐ C++

```cpp
#include <iostream>
#include <mutex>

class Singleton {
private:
    static Singleton* instance;
    static std::mutex mutex;

    // ะัะธะฒะฐัะฝัะน ะบะพะฝััััะบัะพั
    Singleton() {
        std::cout << "Singleton ัะพะทะดะฐะฝ\n";
    }

public:
    // ะะฐะฟัะตั ะบะพะฟะธัะพะฒะฐะฝะธั
    Singleton(const Singleton&) = delete;
    Singleton& operator=(const Singleton&) = delete;

    static Singleton* getInstance() {
        std::lock_guard<std::mutex> lock(mutex);
        if (instance == nullptr) {
            instance = new Singleton();
        }
        return instance;
    }

    void operation() {
        std::cout << "ะะฟะตัะฐัะธั Singleton\n";
    }
};

// ะะฝะธัะธะฐะปะธะทะฐัะธั ััะฐัะธัะตัะบะธั ะฟะพะปะตะน
Singleton* Singleton::instance = nullptr;
std::mutex Singleton::mutex;

int main() {
    Singleton::getInstance()->operation();
    Singleton::getInstance()->operation();
}
```

---

### ๐ผ๏ธ ะะปะปััััะฐัะธะฒะฝะฐั ััะตะผะฐ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ       main()           โ
โโโโโโโโโโโฌโโโโโโโโโโโโโโโ
          โ
          โผ
  Singleton::getInstance()
          โ
          โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     Singleton (1x)     โ
โ operation()            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### โ ะฃะณะปัะฑะปัััะธะต ะฒะพะฟัะพัั:

1. ะะฐัะตะผ ะดะตะปะฐัั ะบะพะฝััััะบัะพั ะบะปะฐััะฐ Singleton ะฟัะธะฒะฐัะฝัะผ?
2. ะงัะพ ะฟัะพะธะทะพะนะดะตั, ะตัะปะธ ะธัะฟะพะปัะทะพะฒะฐัั Singleton ะฑะตะท ะฑะปะพะบะธัะพะฒะบะธ ะฒ ะผะฝะพะณะพะฟะพัะพัะฝะพะน ััะตะดะต?
3. ะะพัะตะผั Singleton ััะธัะฐะตััั ะฐะฝัะธะฟะฐััะตัะฝะพะผ ะฒ ะฑะพะปััะธั ะฟัะพะตะบัะฐั?
4. ะะฐะบ ัะตะฐะปะธะทะพะฒะฐัั ะปะตะฝะธะฒัั ะธะฝะธัะธะฐะปะธะทะฐัะธั ะฑะตะท ััะตัะตะบ ะฟะฐะผััะธ?
5. ะะฐะบะธะต ัะฟะพัะพะฑั ัะดะตะปะฐัั Singleton ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝัะผ ะฒ C++11 ะธ ะฒััะต?
6. ะะฐะบ ะฑั ะฒั ัะตะฐะปะธะทะพะฒะฐะปะธ Singleton ะดะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฒ ัะฝะธั-ัะตััะฐั?

---

## ๐งฉ ะะฐััะตัะฝ 1: **Singleton (ะะดะธะฝะพัะบะฐ)**

### ๐ ะฃะณะปัะฑะปัััะธะต ะฒะพะฟัะพัั ะธ ะพัะฒะตัั

1. **ะะฐะบ ะณะฐัะฐะฝัะธััะตััั, ััะพ ัะบะทะตะผะฟะปัั ัะพะทะดะฐะตััั ัะพะปัะบะพ ะพะดะธะฝ ัะฐะท?**

   * ะัะฟะพะปัะทัะตััั ััะฐัะธัะตัะบะฐั ะปะพะบะฐะปัะฝะฐั ะฟะตัะตะผะตะฝะฝะฐั ะฒะฝัััะธ ััะฝะบัะธะธ `getInstance()`. ะญัะพ ะพะฑะตัะฟะตัะธะฒะฐะตั ะปะตะฝะธะฒัั ะธ ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝัั ะธะฝะธัะธะฐะปะธะทะฐัะธั ั C++11 ะธ ะฒััะต.

2. **ะะพัะตะผั `delete` ะฝะต ะฒัะทัะฒะฐะตััั ะฒ ะดะตััััะบัะพัะต?**

   * ะญะบะทะตะผะฟะปัั ัะฟัะฐะฒะปัะตััั ัะธััะตะผะพะน, ะฐ ะฝะต ะฒัััะฝัั. ะฃะฝะธััะพะถะตะฝะธะต ะพะฑัะตะบัะฐ ะฟัะพะธััะพะดะธั ะฟัะธ ะทะฐะฒะตััะตะฝะธะธ ัะฐะฑะพัั ะฟัะพะณัะฐะผะผั.

3. **ะะฐะบ ะธะทะฑะตะถะฐัั ััะตัะตะบ ะฟะฐะผััะธ ะฟัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ `new`?**

   * ะัะฟะพะปัะทัะนัะต ัะผะฝัะต ัะบะฐะทะฐัะตะปะธ (`std::unique_ptr` ะธะปะธ `std::shared_ptr`), ััะพะฑั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฟัะฐะฒะปััั ะฒัะตะผะตะฝะตะผ ะถะธะทะฝะธ ะพะฑัะตะบัะฐ.

4. **ะะฐะบ ัะตะฐะปะธะทะพะฒะฐัั ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝัะน Singleton?**

   * ะัะฟะพะปัะทัะนัะต ััะฐัะธัะตัะบัั ะปะพะบะฐะปัะฝัั ะฟะตัะตะผะตะฝะฝัั, ะบะพัะพัะฐั ะธะฝะธัะธะฐะปะธะทะธััะตััั ะฟัะธ ะฟะตัะฒะพะผ ะพะฑัะฐัะตะฝะธะธ ะบ `getInstance()`. ะญัะพ ะพะฑะตัะฟะตัะธั ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝะพััั ะฑะตะท ะฝะตะพะฑัะพะดะธะผะพััะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะผัััะตะบัะพะฒ.

5. **ะะฐะบะพะน ะฟะพะดัะพะด ะฟัะตะดะฟะพััะธัะตะปัะฝะตะต: ะปะตะฝะธะฒัะน ะธะปะธ ัะฐะฝะฝะธะน?**

   * ะะตะฝะธะฒัะน Singleton ะธะฝะธัะธะฐะปะธะทะธััะตััั ะฟัะธ ะฟะตัะฒะพะผ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ, ััะพ ัะบะพะฝะพะผะธั ัะตััััั, ะฝะพ ะผะพะถะตั ะฑััั ะฝะตัััะตะบัะธะฒะฝัะผ ะฒ ะผะฝะพะณะพะฟะพัะพัะฝะพะน ััะตะดะต. ะะฐะฝะฝะธะน Singleton ะธะฝะธัะธะฐะปะธะทะธััะตััั ะฟัะธ ััะฐััะต ะฟัะพะณัะฐะผะผั, ััะพ ะพะฑะตัะฟะตัะธะฒะฐะตั ะฑะพะปะตะต ะฟัะตะดัะบะฐะทัะตะผะพะต ะฟะพะฒะตะดะตะฝะธะต.

---

### ๐งฑ ะะฐััะธัะตะฝะฝัะน ะฟัะธะผะตั ะฝะฐ C++

```cpp
#include <iostream>
#include <memory>
#include <mutex>

class Singleton {
private:
    static std::unique_ptr<Singleton> instance;
    static std::mutex mtx;

    Singleton() { std::cout << "Singleton ัะพะทะดะฐะฝ\n"; }

public:
    static Singleton* getInstance() {
        if (!instance) {
            std::lock_guard<std::mutex> lock(mtx);
            if (!instance) {
                instance.reset(new Singleton());
            }
        }
        return instance.get();
    }

    void showMessage() { std::cout << "ะกะพะพะฑัะตะฝะธะต ะพั Singleton\n"; }
};

std::unique_ptr<Singleton> Singleton::instance = nullptr;
std::mutex Singleton::mtx;

int main() {
    Singleton::getInstance()->showMessage();
    return 0;
}
```

---

### ๐ผ๏ธ ะกัะตะผะฐ

```
+---------------------+
|   Singleton         |
|---------------------|
| - instance          |
|---------------------|
| + getInstance()     |
| + showMessage()     |
+---------------------+
```

---

## โ ะะตะฐะปะธะทะฐัะธั Singleton ะฝะฐ C++ (ั ะบะพะผะผะตะฝัะฐัะธัะผะธ)

```cpp
#include <iostream>

// ะะปะฐัั Singleton โ ะณะฐัะฐะฝัะธััะตั, ััะพ ั ะฝะตะณะพ ะฑัะดะตั ัะพะปัะบะพ ะพะดะธะฝ ัะบะทะตะผะฟะปัั.
class Singleton {
private:
    // ะัะธะฒะฐัะฝัะน ะบะพะฝััััะบัะพั โ ะฝะธะบัะพ ะฝะต ัะผะพะถะตั ัะพะทะดะฐัั ะพะฑัะตะบั ะธะทะฒะฝะต
    Singleton() {
        std::cout << "Singleton ัะพะทะดะฐะฝ\n";
    }

    // ะฃะดะฐะปัะตะผ ะบะพะฟะธััััะธะน ะบะพะฝััััะบัะพั ะธ ะพะฟะตัะฐัะพั ะฟัะธัะฒะฐะธะฒะฐะฝะธั โ
    // ััะพ ะทะฐะฟัะตัะฐะตั ะบะพะฟะธัะพะฒะฐะฝะธะต ะธ ะบะปะพะฝะธัะพะฒะฐะฝะธะต ะพะฑัะตะบัะฐ Singleton.
    Singleton(const Singleton&) = delete;
    Singleton& operator=(const Singleton&) = delete;

public:
    // ะกัะฐัะธัะตัะบะฐั ััะฝะบัะธั, ะบะพัะพัะฐั ะฒะพะทะฒัะฐัะฐะตั ะตะดะธะฝััะฒะตะฝะฝัะน ัะบะทะตะผะฟะปัั
    static Singleton& getInstance() {
        // ะะพะบะฐะปัะฝะฐั ััะฐัะธัะตัะบะฐั ะฟะตัะตะผะตะฝะฝะฐั ัะพะทะดะฐัััั ะพะดะธะฝ ัะฐะท ะฟัะธ ะฟะตัะฒะพะผ ะฒัะทะพะฒะต.
        // ะก C++11 ััะพ ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝะพ.
        static Singleton instance;

        // ะะพะทะฒัะฐัะฐะตะผ ัััะปะบั ะฝะฐ ัะบะทะตะผะฟะปัั
        return instance;
    }

    // ะัะธะผะตั ะผะตัะพะดะฐ ะฒะฝัััะธ Singleton
    void sayHello() {
        std::cout << "ะัะธะฒะตั ะธะท Singleton!\n";
    }
};

// ะขะพัะบะฐ ะฒัะพะดะฐ ะฒ ะฟัะพะณัะฐะผะผั
int main() {
    // ะะพะปััะฐะตะผ ัััะปะบั ะฝะฐ ะตะดะธะฝััะฒะตะฝะฝัะน ัะบะทะตะผะฟะปัั ะธ ะฒัะทัะฒะฐะตะผ ะผะตัะพะด
    Singleton& s1 = Singleton::getInstance();
    s1.sayHello();

    // ะะพะปััะฐะตะผ ะตัั ะพะดะฝั ัััะปะบั โ ััะพ ัะพั ะถะต ะพะฑัะตะบั
    Singleton& s2 = Singleton::getInstance();
    s2.sayHello();

    // ะัะพะฒะตัะธะผ, ััะพ ััะพ ะดะตะนััะฒะธัะตะปัะฝะพ ะพะดะธะฝ ะธ ัะพั ะถะต ะพะฑัะตะบั
    std::cout << "ะะดัะตั ะฟะตัะฒะพะณะพ: " << &s1 << std::endl;
    std::cout << "ะะดัะตั ะฒัะพัะพะณะพ: " << &s2 << std::endl;

    return 0;
}
```

---

## ๐ง ะะฑัััะฝะตะฝะธะต ะบะปััะตะฒัั ะผะพะผะตะฝัะพะฒ:

| ะญะปะตะผะตะฝั                                   | ะะฑัััะฝะตะฝะธะต                                                                                                  |
| ----------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| `private Singleton()`                     | ะะพะฝััััะบัะพั ัะบััั โ ะฝะธะบัะพ ะฝะต ะผะพะถะตั ัะพะทะดะฐัั ะพะฑัะตะบั ะฝะฐะฟััะผัั.                                                 |
| `static Singleton& getInstance()`         | ะะพะทะฒัะฐัะฐะตั **ะตะดะธะฝััะฒะตะฝะฝัะน ัะบะทะตะผะฟะปัั**. ะกะพะทะดะฐัั ะตะณะพ ะฟัะธ ะฟะตัะฒะพะผ ะฒัะทะพะฒะต.                                       |
| `static Singleton instance;`              | ะญัะพ ะธ ะตััั ัะตะฐะปะธะทะฐัะธั **ะปะตะฝะธะฒะพะน ะธะฝะธัะธะฐะปะธะทะฐัะธะธ**: ะพะฑัะตะบั ัะพะทะดะฐัััั **ัะพะปัะบะพ ะพะดะธะฝ ัะฐะท**, ะบะพะณะดะฐ ัะตะฐะปัะฝะพ ะฝัะถะตะฝ. |
| `static` ะฒะฝัััะธ ััะฝะบัะธะธ                   | ะก ะณะฐัะฐะฝัะธะตะน ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝะพััะธ ะฝะฐัะธะฝะฐั ั **C++11**.                                                         |
| ะฃะดะฐะปะตะฝะธะต `copy constructor` ะธ `operator=` | ะะฐัะธัะฐ ะพั ัะพะทะดะฐะฝะธั ะบะพะฟะธะน โ Singleton ะดะพะปะถะตะฝ ัััะตััะฒะพะฒะฐัั ะฒ **ะพะดะฝะพะผ ัะบะทะตะผะฟะปััะต**.                            |

---

## ๐งช ะัะธะผะตั ะฒัะฒะพะดะฐ:

```text
Singleton ัะพะทะดะฐะฝ
ะัะธะฒะตั ะธะท Singleton!
ะัะธะฒะตั ะธะท Singleton!
ะะดัะตั ะฟะตัะฒะพะณะพ: 0x558cbf6d5e20
ะะดัะตั ะฒัะพัะพะณะพ: 0x558cbf6d5e20
```

ะะฐะบ ะฒะธะดะฝะพ โ ะพะฑัะตะบั ัะพะทะดะฐัััั **ัะพะปัะบะพ ะพะดะธะฝ ัะฐะท**, ะธ ะพะฑะฐ ะพะฑัะฐัะตะฝะธั ะฒะพะทะฒัะฐัะฐัั **ะพะดะธะฝ ะธ ัะพั ะถะต ะฐะดัะตั**.

---

ะัะปะธ ะฝัะถะฝะพ, ะผะพะณั ะฟะพะบะฐะทะฐัั ัะฐะบะถะต **ะปะตะฝะธะฒัั ะธะฝะธัะธะฐะปะธะทะฐัะธั ั ัะบะฐะทะฐัะตะปะตะผ ะธ ะบะพะฝััะพะปะตะผ ัะตัะตะท `std::unique_ptr`**, ะธะปะธ **thread-safe ะฒะตััะธั ั `std::mutex` ะดะปั C++98/03**.

